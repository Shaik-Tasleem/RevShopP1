<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
	<div class="container">
    <div class="left-panel">
        <h2>Forgot Password?</h2>
        <p>Enter your registered email or phone number to reset your password.</p>
    </div>
    <div class="right-panel">
        <div class="switch-method">
            <!-- Anchor tag to switch between email and phone number -->
            <a href="#" id="switch-to-phone" onclick="switchToPhone()">Switch to Phone</a>
            <a href="#" id="switch-to-email" style="display:none;" onclick="qwswitchToEmail()">Switch to Email</a>
        </div>
        <form id="reset-password-form" th:action="@{/ecom/api/reset-password/forgot(userType=${userType})}" th:method="post" onsubmit="return validateForm(event)">
            <!-- Email Input Box -->
            <div id="email-step" class="input-box">
                <label for="email">Enter your email</label>
                <input type="email" id="email" name="email" placeholder="Enter your email" required>
                <button type="button" class="continue-btn" id="send-code-btn" onclick="sendVerificationCode()">Send Verification Code</button>
            </div>

            <!-- Phone Input Box (Initially Hidden) -->
            <div id="phone-step" class="input-box" style="display: none;">
                <label for="phone">Enter your phone number</label>
                <input type="tel" id="phone" name="phone" placeholder="Enter your phone number" pattern="[0-9]{10}">
                <button type="button" class="continue-btn" id="send-phone-code-btn" onclick="sendVerificationCode()">Send Verification Code</button>
            </div>

            <div id="verification-step" class="input-box" style="display: none;">
                <label for="verification-code">Enter the 6-digit verification code</label>
                <input type="text" id="verification-code" name="verification-code" placeholder="Enter code" required maxlength="6">
                <button type="button" class="continue-btn" onclick="verifyCode()">Verify Code</button>
                <button type="button" class="continue-btn" style="margin-top: 10px;" id="resend-otp-btn" onclick="resendVerificationCode()">Resend OTP</button>
            </div>

            <div id="reset-step" class="input-box" style="display: none;">
                <label for="new-password">New Password</label>
                <input type="password" id="new-password" name="new-password" placeholder="Enter new password" required oninput="checkPasswordStrength()">
                <div id="password-strength" class="password-strength"></div>
                <div class="requirements">
                    <p>Your password should include:</p>
                    <ul>
                        <li>At least one lowercase letter</li>
                        <li>At least one uppercase letter</li>
                        <li>At least one number</li>
                        <li>At least one special character</li>
                        <li>Minimum 8 characters long</li>
                    </ul>
                </div>
                <label for="confirm-password">Confirm New Password</label>
                <input type="password" id="confirm-password" name="confirm-password" placeholder="Re-enter new password" required>
                <button type="submit" class="continue-btn">Reset Password</button>
            </div>
        </form>
        <div class="login-link">
            <a th:href="@{/ecom/LoginPage}">Existing User? Log in</a>
        </div>
    </div>
</div>

<!-- CSS Styling for Box and Switch -->
<style>
    .container {
        display: flex;
        justify-content: space-between;
    }

    .left-panel, .right-panel {
        width: 45%;
    }

    .input-box {
        border: 1px solid #e0e0e0;
        padding: 20px;
        border-radius: 5px;
        margin-bottom: 20px;
        box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.1);
    }

    .input-box input {
        width: 100%;
        padding: 10px;
        border: 1px solid #e0e0e0;
        border-radius: 4px;
        margin-top: 10px;
    }

    .continue-btn {
        display: inline-block;
        padding: 10px 20px;
        background-color: #2874f0;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }

    .switch-method {
        text-align: right;
        margin-bottom: 10px;
    }

    .switch-method a {
        color: #2874f0;
        cursor: pointer;
        text-decoration: none;
    }

    .switch-method a:hover {
        text-decoration: underline;
    }
</style>
	<script>
	// Switch to Phone input
	function switchToPhone() {
	    document.getElementById('email-step').style.display = 'none';
	    document.getElementById('phone-step').style.display = 'block';
	    document.getElementById('switch-to-phone').style.display = 'none';
	    document.getElementById('switch-to-email').style.display = 'inline';
	}

	// Switch to Email input
	function switchToEmail() {
	    document.getElementById('email-step').style.display = 'block';
	    document.getElementById('phone-step').style.display = 'none';
	    document.getElementById('switch-to-phone').style.display = 'inline';
	    document.getElementById('switch-to-email').style.display = 'none';
	}

	</script>
</body>
</html>
